execute at @s[scores={search_level=1}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 40t
execute at @s[scores={search_level=2}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 39t
execute at @s[scores={search_level=3}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 38t
execute at @s[scores={search_level=4}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 38t
execute at @s[scores={search_level=5}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 38t
execute at @s[scores={search_level=6}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 37t
execute at @s[scores={search_level=7}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 37t
execute at @s[scores={search_level=8}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 36t
execute at @s[scores={search_level=9}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 36t
execute at @s[scores={search_level=10}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 36t

execute at @s[scores={search_level=11}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 36t
execute at @s[scores={search_level=12}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 35t
execute at @s[scores={search_level=13}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 35t
execute at @s[scores={search_level=14}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 35t
execute at @s[scores={search_level=15}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 34t
execute at @s[scores={search_level=16}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 34t
execute at @s[scores={search_level=17}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 34t
execute at @s[scores={search_level=18}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 33t
execute at @s[scores={search_level=19}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 33t

execute at @s[scores={search_level=20}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 32t
execute at @s[scores={search_level=21}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 32t
execute at @s[scores={search_level=22}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 31t
execute at @s[scores={search_level=23}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 31t
execute at @s[scores={search_level=24}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 31t
execute at @s[scores={search_level=25}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 30t
execute at @s[scores={search_level=26}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 30t
execute at @s[scores={search_level=27}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 30t
execute at @s[scores={search_level=28}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 29t
execute at @s[scores={search_level=29}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 29t


execute at @s[scores={search_level=30}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 29t
execute at @s[scores={search_level=31}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 29t
execute at @s[scores={search_level=32}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 29t
execute at @s[scores={search_level=33}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 28t
execute at @s[scores={search_level=34}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 28t
execute at @s[scores={search_level=35}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 28t
execute at @s[scores={search_level=36}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 27t
execute at @s[scores={search_level=37}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 27t
execute at @s[scores={search_level=38}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 26t
execute at @s[scores={search_level=39}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 26t

execute at @s[scores={search_level=40}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 26t
execute at @s[scores={search_level=41}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 25t
execute at @s[scores={search_level=42}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 25t
execute at @s[scores={search_level=43}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 25t
execute at @s[scores={search_level=44}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 24t
execute at @s[scores={search_level=45}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 24t
execute at @s[scores={search_level=46}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 24t
execute at @s[scores={search_level=47}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=48}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=49}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t


execute at @s[scores={search_level=50}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=51}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=52}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=53}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 23t
execute at @s[scores={search_level=54}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t
execute at @s[scores={search_level=55}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t
execute at @s[scores={search_level=56}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t
execute at @s[scores={search_level=57}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t
execute at @s[scores={search_level=58}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t
execute at @s[scores={search_level=59}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 22t


execute at @s[scores={search_level=60}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=61}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=62}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=63}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=64}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=65}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=66}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=67}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 21t
execute at @s[scores={search_level=68}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=69}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t


execute at @s[scores={search_level=70}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=71}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=72}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=73}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=74}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=75}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=76}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=77}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=78}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t
execute at @s[scores={search_level=79}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 20t


execute at @s[scores={search_level=80}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=81}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=82}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=83}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=84}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=85}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=86}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=87}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=88}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=89}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t

execute at @s[scores={search_level=90}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 19t
execute at @s[scores={search_level=91}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=92}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=93}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=94}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=95}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=96}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=97}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=98}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 18t
execute at @s[scores={search_level=99}] if entity @e[tag=search_bookshelf,distance=..4] run schedule function custom:loot/bookshelf 17t


execute at @s if entity @e[tag=search_bookshelf,distance=..4] run scoreboard players reset @s search_timer

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run tag @s add searching_bookshelf

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run effect give @s minecraft:slowness 2 255 true

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run effect give @s minecraft:resistance 1 255 true


execute at @s if entity @e[tag=search_bookshelf,distance=..4] run tellraw @s {"text":"You feel a magical force push you down from above...","color":"yellow"}

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run fill ~ ~2 ~ ~ ~2 ~ piston[facing=down] replace air
execute at @s if entity @e[tag=search_bookshelf,distance=..4] run fill ~ ~3 ~ ~ ~3 ~ redstone_block replace air

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run playsound minecraft:item.book.put player @s ~ ~ ~ 1 1

execute at @s if entity @e[tag=search_bookshelf,distance=..4] run tellraw @s {"text":"You begin to search through the bookshelf...","color":"yellow"}


execute at @s if entity @e[tag=search_bookshelf,distance=..4] run fill ~ ~1 ~ ~ ~1 ~ barrier replace acacia_trapdoor

execute at @s unless entity @e[tag=search_bookshelf,distance=..4] if entity @e[tag=search_bookshelf,distance=5..] run tellraw @s {"text":"You are to far away!","color":"yellow"}

execute at @s unless entity @e[tag=search_bookshelf,distance=..4] if entity @e[tag=search_bookshelf,distance=5..] run advancement revoke @s only custom:search_bookshelf


